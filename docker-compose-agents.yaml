x-common:
  agent-env: &agent-env
    MINECRAFT_HOST: "flat"
    MINECRAFT_PORT: "25565"
    INSECURE_CODING: "true"
  agent: &agent
    build:
      context: .
    depends_on:
      flat:
        condition: service_healthy

services:
  andy:
    <<: *agent
    environment:
      <<: *agent-env
      OPENAI_API_KEY:
  gpt:
    extends:
      service: andy
    environment:
      PROFILE: gpt
  claude:
    extends:
      service: andy
    environment:
      ANTHROPIC_API_KEY:
      PROFILE: claude
  gemini:
    extends:
      service: andy
    environment:
      GEMINI_API_KEY:
      PROFILE: gemini