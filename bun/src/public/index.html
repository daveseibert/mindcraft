<!DOCTYPE html>
<html data-theme="dark" lang="en">
<head>
    <meta charset="UTF-8">
    <title>Hello</title>
    <link rel="stylesheet" href="tailwindcss" />
    <link rel="stylesheet" href="daisyui" />
    <link rel="stylesheet" href="./style.css" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Mindcraft</title>
    <script src="https://cdn.socket.io/4.8.1/socket.io.min.js" integrity="sha384-mkQ3/7FUtcGyoppY6bz/PORYoGqOl7/aSUMn2ymDOJcapfS6PHqxhRTMh1RR0Q6+" crossorigin="anonymous"></script>
<!--    <style>-->
<!--        body {-->
<!--            font-family: Arial, sans-serif;-->
<!--            margin: 20px;-->
<!--            background: #1a1a1a;-->
<!--            color: #e0e0e0;-->
<!--        }-->
<!--        #agents {-->
<!--            background: #2d2d2d;-->
<!--            padding: 20px;-->
<!--            border-radius: 8px;-->
<!--            box-shadow: 0 2px 4px rgba(0,0,0,0.2);-->
<!--        }-->
<!--        h1 {-->
<!--            color: #ffffff;-->
<!--        }-->
<!--        .agent {-->
<!--            margin: 10px 0;-->
<!--            padding: 10px;-->
<!--            background: #363636;-->
<!--            border-radius: 4px;-->
<!--            display: flex;-->
<!--            justify-content: space-between;-->
<!--            align-items: center;-->
<!--        }-->
<!--        .restart-btn, .start-btn, .stop-btn {-->
<!--            color: white;-->
<!--            border: none;-->
<!--            padding: 5px 10px;-->
<!--            border-radius: 4px;-->
<!--            cursor: pointer;-->
<!--            margin-left: 5px;-->
<!--        }-->
<!--        .restart-btn {-->
<!--            background: #4CAF50;-->
<!--        }-->
<!--        .start-btn {-->
<!--            background: #2196F3;-->
<!--        }-->
<!--        .stop-btn {-->
<!--            background: #f44336;-->
<!--        }-->
<!--        .restart-btn:hover { background: #45a049; }-->
<!--        .start-btn:hover { background: #1976D2; }-->
<!--        .stop-btn:hover { background: #d32f2f; }-->
<!--        .status-icon {-->
<!--            font-size: 12px;-->
<!--            margin-right: 8px;-->
<!--        }-->
<!--        .status-icon.online {-->
<!--            color: #4CAF50;-->
<!--        }-->
<!--        .status-icon.offline {-->
<!--            color: #f44336;-->
<!--        }-->
<!--    </style>-->
</head>
<body>
    <h1>Mindcraft</h1>
    <div id="agents"></div>

    <script>
        const socket = io("ws://localhost:3030");
        const agentsDiv = document.getElementById('agents');

        socket.on('agents-update', (agents) => {
            agentsDiv.innerHTML = agents.length ? 
                agents.map(agent => `
                    <div class="agent">
                        <span>
                            <span class="status-icon ${agent.in_game ? 'online' : 'offline'}">‚óè</span>
                            ${agent.name}
                        </span>
                        <div>
                            ${agent.in_game ? `
                                <button class="stop-btn" onclick="stopAgent('${agent.name}')">Stop</button>
                                <button class="restart-btn" onclick="restartAgent('${agent.name}')">Restart</button>
								<input type="text" id="messageInput" placeholder="Enter a message or command..."></input><button class="start-btn" onclick="sendMessage('${agent.name}', document.getElementById('messageInput').value)">Send</button>
                            ` : `
                                <button class="start-btn" onclick="startAgent('${agent.name}')">Start</button>
                            `}
                        </div>
                    </div>
                `).join('') + 
                `<button class="stop-btn btn" onclick="killAllAgents()">Stop All</button>
                <button class="stop-btn btn" onclick="shutdown()">Shutdown</button>` :
                '<div class="agent">No agents connected</div>';
        });

        function restartAgent(agentName) {
            socket.emit('restart-agent', agentName);
        }

        function startAgent(agentName) {
            socket.emit('start-agent', agentName);
        }

        function stopAgent(agentName) {
            socket.emit('stop-agent', agentName);
        }

        function killAllAgents() {
            socket.emit('stop-all-agents');
        }

        function shutdown() {
            socket.emit('shutdown');
        }
		
		function sendMessage(agentName, message) {
			socket.emit('send-message', agentName, message)
		}
    </script>

    <ul class="list bg-base-100 rounded-box shadow-md">

        <li class="p-4 pb-2 text-xs opacity-60 tracking-wide">Most played songs this week</li>

        <li class="list-row">
            <div class="text-4xl font-thin opacity-30 tabular-nums">01</div>
            <div><img class="size-10 rounded-box" src="https://img.daisyui.com/images/profile/demo/1@94.webp"/></div>
            <div class="list-col-grow">
                <div>Dio Lupa</div>
                <div class="text-xs uppercase font-semibold opacity-60">Remaining Reason</div>
            </div>
            <button class="btn btn-square btn-ghost">
                <svg class="size-[1.2em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g stroke-linejoin="round" stroke-linecap="round" stroke-width="2" fill="none" stroke="currentColor"><path d="M6 3L20 12 6 21 6 3z"></path></g></svg>
            </button>
        </li>

        <li class="list-row">
            <div class="text-4xl font-thin opacity-30 tabular-nums">02</div>
            <div><img class="size-10 rounded-box" src="https://img.daisyui.com/images/profile/demo/4@94.webp"/></div>
            <div class="list-col-grow">
                <div>Ellie Beilish</div>
                <div class="text-xs uppercase font-semibold opacity-60">Bears of a fever</div>
            </div>
            <button class="btn btn-square btn-ghost">
                <svg class="size-[1.2em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g stroke-linejoin="round" stroke-linecap="round" stroke-width="2" fill="none" stroke="currentColor"><path d="M6 3L20 12 6 21 6 3z"></path></g></svg>
            </button>
        </li>

        <li class="list-row">
            <div class="text-4xl font-thin opacity-30 tabular-nums">03</div>
            <div><img class="size-10 rounded-box" src="https://img.daisyui.com/images/profile/demo/3@94.webp"/></div>
            <div class="list-col-grow">
                <div>Sabrino Gardener</div>
                <div class="text-xs uppercase font-semibold opacity-60">Cappuccino</div>
            </div>
            <button class="btn btn-square btn-ghost">
                <svg class="size-[1.2em]" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g stroke-linejoin="round" stroke-linecap="round" stroke-width="2" fill="none" stroke="currentColor"><path d="M6 3L20 12 6 21 6 3z"></path></g></svg>
            </button>
        </li>

    </ul>
</body>
</html> 
